<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Information</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">
    <nav class="bg-blue-600 text-white p-4 shadow-lg">
        <div class="container mx-auto">
            <h1 class="text-xl font-bold">Information Center</h1>
        </div>
    </nav>

    <div class="container mx-auto p-8 flex-grow">
        <div class="bg-white rounded-lg shadow-lg p-8 max-w-4xl mx-auto">
            <h2 id="infoTitle" class="text-2xl font-bold text-gray-800 mb-6 border-b pb-4">Loading...</h2>
            <div id="infoContent" class="prose max-w-none text-gray-700">
                <div class="animate-pulse space-y-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-800 text-white p-4 mt-8">
        <div class="container mx-auto text-center text-sm">
            &copy; 2025 Training Voucher System
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const params = new URLSearchParams(window.location.search);
            const type = params.get('type');
            const titleEl = document.getElementById('infoTitle');
            const contentEl = document.getElementById('infoContent');

            if (!type) {
                titleEl.textContent = 'Error';
                contentEl.innerHTML = '<p class="text-red-600">No information type specified.</p>';
                return;
            }

            const typeTitles = {
                'terms': 'Terms & Conditions',
                'generate_token': 'Voucher Generation Warning',
                'warning_registration': 'Registration Warning',
                'info_general': 'General Information'
            };

            titleEl.textContent = typeTitles[type] || 'Information';

            try {
                const res = await fetch(`/api/public/others-information?type=${type}`);
                const data = await res.json();

                if (data.success && data.data.length > 0) {
                    const info = data.data[0];
                    contentEl.innerHTML = info.detail.replace(/\n/g, '<br>');
                } else {
                    contentEl.innerHTML = '<p class="text-gray-500">No information found for this section.</p>';
                }
            } catch (err) {
                console.error('Failed to load info:', err);
                titleEl.textContent = 'Error';
                contentEl.innerHTML = '<p class="text-red-600">Failed to load information. Please try again later.</p>';
            }
        });
    </script>
</body>

</html>